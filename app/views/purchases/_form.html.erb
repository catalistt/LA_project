<div class="container">
  <div class="row">
    <div class="col-4 offset-1">
      <h1><%= title%></h1><br>
    </div></div>
      <%= form_with(model: purchase, local: true) do |form| %>
        <% if purchase.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(purchase.errors.count, "error") %> prohibited this purchase from being saved:</h2>

            <ul>
            <% purchase.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
            </ul>
          </div>
        <% end %>
        <div class="row">
          <div class="col-4 offset-1">
            <div class="field">
              <%= form.label :Proveedor, class: "control-label"%>
              <%= form.select(:supplier_id, Supplier.all.map {|supplier| ["#{supplier.name} - #{supplier.rut}", supplier.id] }, { :include_blank => 'Ingresar proveedor' },class:"custom-select") %>
            </div>
          </div>

          <div class="col-4">
            <div class="field">
              <%= form.label :Folio %><br>
              <%= form.number_field :invoice_number, class:"form-control" %>
            </div>
          </div>

          <div class="form-group">
              <%= form.hidden_field :total_amount, class: "form-control" %>
            </div>
        </div>

        <div class="container">
        <div class="row">
          <h4 class="ml-4 pl-2 text-blue">Agregar productos</h4>
          <div class="field" id="add_items">
            <%= form.fields_for :add_items do |add_item_form| %>
              <%= render 'add_item_fields', f: add_item_form %>
            <% end %>
            <div class="links"><br>
              <%= link_to_add_association 'AÃ±adir nuevo producto', form, :add_items, class:"btn btn-info ml-5" %>
            </div>
          </div>
        </div>
        
        <div class="actions offset-1"><br>
          <%= form.submit "Ingresar compra", class:"btn btn-success" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
